## SQL Primary Keys: ডেটাবেস ডিজাইনের মূল ভিত্তি

ডেটাবেস ম্যানেজমেন্ট সিস্টেমে প্রতিটি তথ্যকে আলাদাভাবে চেনার জন্য এবং ডেটার নির্ভুলতা বজায় রাখার জন্য Primary Key ব্যবহার করা হয়।

## ১. Primary Key কী?

Primary Key হলো একটি টেবিলের একটি নির্দিষ্ট কলাম (বা একাধিক কলামের সেট) যা প্রতিটি রো (row) বা রেকর্ডকে **ইউনিকভাবে (uniquely)** শনাক্ত করতে পারে।

Primary Key-এর বৈশিষ্ট্য:

১. **ইউনিক (Unique):** একটি কলামে একই মান দুইবার থাকতে পারবে না। ২. **নট নাল (Not Null):** এই কলামটি কখনও খালি রাখা যাবে না। ৩. **স্থায়িত্ব (Stable):** এর মান বারবার পরিবর্তন করা উচিত নয়।

## ২. কেন Primary Key ব্যবহার করব?

- **শনাক্তকরণ:** হাজার হাজার তথ্যের মধ্যে একটি নির্দিষ্ট তথ্য খুঁজে বের করতে এটি সাহায্য করে।

- **গতি:** এটি ডেটা রিট্রিভাল বা তথ্য খুঁজে বের করার গতি বাড়িয়ে দেয়।

- **সম্পর্ক তৈরি:** একাধিক টেবিলের মধ্যে কানেকশন বা রিলেশন তৈরির রেফারেন্স পয়েন্ট হিসেবে এটি কাজ করে।

- **আপডেট ও ডিলিট:** নির্দিষ্ট কোনো রো আপডেট বা ডিলিট করা অনেক সহজ হয়ে যায়।

## ৩. Primary Key তৈরি করার পদ্ধতি (Syntax)

ভিডিওতে টেবিল তৈরির সময় Primary Key সেট করার বিভিন্ন উপায় দেখানো হয়েছে।

### ক) সরাসরি কলামের সাথে (Inline Syntax):

```sql
CREATE TABLE students (
    student_id INT PRIMARY KEY,
    name VARCHAR(50)
);
```

**ব্যাখ্যা:**

- `CREATE TABLE`: নতুন টেবিল তৈরির কমান্ড।

- `student_id INT`: একটি পূর্ণসংখ্যার কলাম।

- `PRIMARY KEY`: এই কি-ওয়ার্ড দিয়ে `student_id`-কে প্রাইমারি কি ঘোষণা করা হলো।

### খ) টেবিলের শেষে ঘোষণা করা:

```sql
CREATE TABLE orders (
    order_id INT,
    customer_id INT,
    order_date DATE,
    PRIMARY KEY (order_id)
);
```

**ব্যাখ্যা:**

- এখানে সব কলাম লেখার পর শেষে `PRIMARY KEY (order_id)` লিখে নির্দিষ্ট করে দেওয়া হয়েছে কোন কলামটি মেইন আইডি হবে।

### গ) অটো ইনক্রিমেন্ট (AUTO_INCREMENT):

বারবার ম্যানুয়ালি আইডি টাইপ করা ঝামেলার কাজ। তাই আমরা `AUTO_INCREMENT` ব্যবহার করি।

```sql
CREATE TABLE products (
    product_id INT PRIMARY KEY AUTO_INCREMENT,
    product_name VARCHAR(100),
    price DECIMAL(10, 2)
);
```

**ব্যাখ্যা:**

- `AUTO_INCREMENT`: এটি ব্যবহার করলে ডেটাবেস নিজে থেকেই ১, ২, ৩ এভাবে আইডি বাড়িয়ে নেবে। আমাদের আইডি ইনপুট দেওয়ার প্রয়োজন নেই।

## ৪. ALTER TABLE: পরে Primary Key যোগ করা

যদি টেবিল তৈরির সময় প্রাইমারি কি দিতে ভুলে যান, তবে পরে এভাবে যোগ করা যায়:

```
ALTER TABLE suppliers
ADD PRIMARY KEY (supplier_id);
```

**ব্যাখ্যা:**

- `ALTER TABLE`: বিদ্যমান টেবিলের গঠন পরিবর্তনের কমান্ড।

- `ADD PRIMARY KEY`: নতুন করে প্রাইমারি কি যুক্ত করার নির্দেশ।

## ৫. কম্পোজিট প্রাইমারি কি (Composite Primary Key)

কখনো কখনো একটি কলাম দিয়ে একটি রো-কে আলাদা করা যায় না। তখন একাধিক কলাম মিলে একটি প্রাইমারি কি তৈরি হয়। একে বলে **Composite Primary Key**।

**উদাহরণ (এনরোলমেন্ট টেবিল):** একজন ছাত্র অনেক কোর্সে থাকতে পারে, আবার একটি কোর্সে অনেক ছাত্র থাকতে পারে। এখানে শুধু ছাত্রের আইডি বা শুধু কোর্সের আইডি দিয়ে রো চেনা যাবে না।

```sql
CREATE TABLE enrollments (
    student_id INT,
    course_id INT,
    enrollment_date DATE,
    PRIMARY KEY (student_id, course_id)
);
```

**ব্যাখ্যা:**

- এখানে `student_id` এবং `course_id`-এর **যৌথ কম্বিনেশন** ইউনিক হতে হবে।

- যদি ছাত্র ১ কোর্স ১০১-এ ভর্তি হয়, তবে এই ১-১০১ কম্বিনেশনটি আর দ্বিতীয়বার টেবিলে আসতে পারবে না।

## ৬. ইন্টারনাল মেকানিজম: এটি কীভাবে কাজ করে?

MySQL-এ প্রাইমারি কি তৈরি করলে ব্যাকএন্ডে কিছু জটিল কাজ ঘটে যা আমাদের কোডকে ফাস্ট করে।

- **Clustered Index:** প্রাইমারি কি তৈরি করলে একটি 'ক্লাস্টারড ইনডেক্স' তৈরি হয়। এটি একটি ডিকশনারির মতো কাজ করে। ডিকশনারিতে যেমন শব্দগুলো বর্ণানুক্রমিক সাজানো থাকে, ডেটাবেসেও তথ্যগুলো ফিজিক্যালি প্রাইমারি কি-এর ক্রমানুসারে সাজানো থাকে।

- **B+ Tree:** ডেটাবেস ইন্টারনালি **B+ Tree** নামক একটি ডেটা স্ট্রাকচার ব্যবহার করে। এখানে তথ্যগুলো 'Leaf Nodes'-এ থাকে এবং ওপরের নোডগুলো পয়েন্টার হিসেবে কাজ করে দ্রুত তথ্য খুঁজে পেতে সাহায্য করে।

- **Buffer Pool:** দ্রুত কাজ করার জন্য ডেটাবেস ডিস্ক থেকে বারবার তথ্য না পড়ে মেমোরিতে (RAM) একটি **Buffer Pool** বা ক্যাশ (Cache) মেইনটেইন করে।

বেস্ট প্র্যাকটিস (Best Practices)

- প্রতিটি টেবিলে অবশ্যই একটি Primary Key থাকতে হবে।

- সবসময় `INT` বা `BIGINT` ডেটা টাইপ ব্যবহার করার চেষ্টা করুন।

- সম্ভব হলে `AUTO_INCREMENT` ব্যবহার করুন।

---

## Cheat Sheet

### ১. মূল কি-ওয়ার্ড ও সিনট্যাক্স

|   |   |   |
|---|---|---|
|Command/Keyword|Purpose|Example|
|`PRIMARY KEY`|ইউনিক শনাক্তকারী তৈরি|`id INT PRIMARY KEY`|
|`AUTO_INCREMENT`|স্বয়ংক্রিয়ভাবে মান বৃদ্ধি|`id INT PRIMARY KEY AUTO_INCREMENT`|
|`ADD PRIMARY KEY`|পরে কি যুক্ত করা|`ALTER TABLE tab_name ADD PRIMARY KEY (col);`|
|`Composite Key`|একাধিক কলামের সমন্বয়|`PRIMARY KEY (col1, col2)`|

### ২. গুরুত্বপূর্ণ নিয়ম (Rules)

- **No Duplicates:** একই আইডি দুইবার বসানো যাবে না (Error: Duplicate entry)।

- **No Nulls:** প্রাইমারি কি কলাম কখনো খালি (`NULL`) রাখা যাবে না।

- **Only One:** একটি টেবিলে কেবল একটিই প্রাইমারি কি থাকতে পারে (তবে সেটি একাধিক কলামের সমন্বয়ে হতে পারে)।

### ৩. ইন্টারনাল কনসেপ্ট (Quick Recap)

- **Clustered Index:** ডেটা ফিজিক্যালি সাজানো থাকে।

- **B+ Tree:** সার্চিং ফাস্ট করার স্ট্রাকচার।

- **Page Size:** ডিফল্ট সাইজ ১৬ কিলোবাইট (16 KB)।

**সহজ উপমা:** প্রাইমারি কি হলো একটি বইয়ের **পৃষ্ঠা নম্বর (Page Number)**। পৃষ্ঠা নম্বরগুলো ইউনিক এবং ক্রমানুসারে সাজানো থাকে বলেই আমরা সরাসরি যেকোনো পাতায় চলে যেতে পারি। বইয়ের পেছনে থাকা ইনডেক্স হলো সাধারণ ইনডেক্স, কিন্তু পৃষ্ঠা নম্বর নিজে হলো ক্লাস্টারড ইনডেক্স।